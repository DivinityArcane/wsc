#!/bin/bash
echo ">> Cleaning ./dist..."
rm -f dist/*.*
rm -f src/ui.js
echo ">> Combining javascript files..."
cat src/ui/*.js > src/ui.js
cat src/events.js src/lib.js src/packet.js src/channel.js src/tablumps.js src/protocol.js src/commands.js src/client.js src/control.js src/ui.js src/wsc.js > dist/wsc.js
echo ">> Compressing javascript source..."
java -jar /usr/local/bin/yuicompressor-2.4.7/build/yuicompressor-2.4.7.jar -o dist/wsc.min.js dist/wsc.js
echo ">> Compiling CSS..."
sass --style expanded css/wsc.scss:dist/wsc.css
echo ">> Compressing CSS source..."
java -jar /usr/local/bin/yuicompressor-2.4.7/build/yuicompressor-2.4.7.jar -o dist/wsc.min.css dist/wsc.css
echo ">> Moving to test bed..."
./mvlh
echo ">> Done!"